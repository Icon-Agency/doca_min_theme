!function(e,t){"use strict";"function"==typeof define&&define.amd?define("tinysort",function(){return t}):e.tinysort=t}(this,function(){"use strict";function A(e,t){for(var r,n=e.length,o=n;o--;)t(e[r=n-o-1],r)}function s(e,t,r){for(var n in t)(r||e[n]===F)&&(e[n]=t[n]);return e}function e(e,t,r){q.push({prepare:e,sort:t,sortBy:r})}var F,t,E=!1,c=null,r=window,w=r.document,x=parseFloat,D=/(-?\d+\.?\d*)\s*$/g,M=/(\d+\.?\d*)\s*$/g,q=[],B=0,R=0,V=String.fromCharCode(4095),$={selector:c,order:"asc",attr:c,data:c,useVal:E,place:"org",returns:E,cases:E,natural:E,forceStrings:E,ignoreDashes:E,sortFunction:c,useFlex:E,emptyEnd:E};return r.Element&&((t=Element.prototype).matchesSelector=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(e){for(var t=(this.parentNode||this.document).querySelectorAll(e),r=-1;t[++r]&&t[r]!=this;);return!!t[r]}),s(e,{loop:A}),s(function(e,t){function r(e){var t=!!e.selector,r=t&&":"===e.selector[0],n=s(e||{},$);N.push(s({hasSelector:t,hasAttr:!(n.attr===c||""===n.attr),hasData:n.data!==c,hasFilter:r,sortReturnNumber:"asc"===n.order?1:-1},n))}function f(e,t,r){for(var n=r(e.toString()),o=r(t.toString()),a=0;n[a]&&o[a];a++)if(n[a]!==o[a]){var s=Number(n[a]),l=Number(o[a]);return s==n[a]&&l==o[a]?s-l:n[a]>o[a]?1:-1}return n.length-o.length}function d(e){for(var t,r,n=[],o=0,a=-1,s=0;t=(r=e.charAt(o++)).charCodeAt(0);){var l=46==t||48<=t&&t<=57;l!==s&&(n[++a]="",s=l),n[a]+=r}return n}function i(){return y.forEach(function(e){n.appendChild(e.elm)}),n}function u(e){var t=e.elm,r=w.createElement("div");return e.ghost=r,t.parentNode.insertBefore(r,t),e}function h(e,t){var r=e.ghost,n=r.parentNode;n.insertBefore(t,r),n.removeChild(r),delete e.ghost}function p(e,t){var r,n=e.elm;return t.selector&&(t.hasFilter?n.matchesSelector(t.selector)||(n=c):n=n.querySelector(t.selector)),t.hasAttr?r=n.getAttribute(t.attr):t.useVal?r=n.value||n.getAttribute("value"):t.hasData?r=n.getAttribute("data-"+t.data):n&&(r=n.textContent),g(r)&&(t.cases||(r=r.toLowerCase()),r=r.replace(/\s+/g," ")),null===r&&(r=V),r}function g(e){return"string"==typeof e}g(e)&&(e=w.querySelectorAll(e)),0===e.length&&console.warn("No elements to sort");var m,v,n=w.createDocumentFragment(),S=[],y=[],l=[],N=[],C=!0,o=e.length&&e[0].parentNode,a=o.rootNode!==document,b=e.length&&(t===F||!1!==t.useFlex)&&!a&&-1!==getComputedStyle(o,null).display.indexOf("flex");return function(){0===arguments.length?r({}):A(arguments,function(e){r(g(e)?{selector:e}:e)}),B=N.length}.apply(c,Array.prototype.slice.call(arguments,1)),A(e,function(e,t){v?v!==e.parentNode&&(C=!1):v=e.parentNode;var r=N[0],n=r.hasFilter,o=r.selector,a=!o||n&&e.matchesSelector(o)||o&&e.querySelector(o)?y:l,s={elm:e,pos:t,posn:a.length};S.push(s),a.push(s)}),m=y.slice(0),y.sort(function(e,t){var r=0;for(0!==R&&(R=0);0===r&&R<B;){var n=N[R],o=n.ignoreDashes?M:D;if(A(q,function(e){var t=e.prepare;t&&t(n)}),n.sortFunction)r=n.sortFunction(e,t);else if("rand"==n.order)r=Math.random()<.5?1:-1;else{var a=E,s=p(e,n),l=p(t,n),c=""===s||s===F,i=""===l||l===F;if(s===l)r=0;else if(n.emptyEnd&&(c||i))r=c&&i?0:c?1:-1;else{if(!n.forceStrings){var u=g(s)?s&&s.match(o):E,h=g(l)?l&&l.match(o):E;u&&h&&s.substr(0,s.length-u[0].length)==l.substr(0,l.length-h[0].length)&&(a=!0,s=x(u[0]),l=x(h[0]))}r=s===F||l===F?0:n.natural&&(isNaN(s)||isNaN(l))?f(s,l,d):s<l?-1:l<s?1:0}}A(q,function(e){var t=e.sort;t&&(r=t(n,a,s,l,r))}),0==(r*=n.sortReturnNumber)&&R++}return 0===r&&(r=e.pos>t.pos?1:-1),r}),function(){var e=y.length===S.length;if(C&&e)b?y.forEach(function(e,t){e.elm.style.order=t}):v?v.appendChild(i()):console.warn("parentNode has been removed");else{var t=N[0].place,r="start"===t,n="end"===t,o="first"===t,a="last"===t;if("org"===t)y.forEach(u),y.forEach(function(e,t){h(m[t],e.elm)});else if(r||n){var s=m[r?0:m.length-1],l=s&&s.elm.parentNode,c=l&&(r&&l.firstChild||l.lastChild);c&&(c!==s.elm&&(s={elm:c}),u(s),n&&l.appendChild(s.ghost),h(s,i()))}else(o||a)&&h(u(m[o?0:m.length-1]),i())}}(),y.map(function(e){return e.elm})},{plugin:e,defaults:$})}());